# FILM!

**–î–æ–º–µ–Ω–Ω–æ–µ –∏–º—è:**  
–ü—Ä–æ–µ–∫—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: [my-choice.nomorepartiesco.ru](https://my-choice.nomorepartiesco.ru)

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º SSL, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –≥–æ—Ç–æ–≤ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ HTTPS.

### –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞ —Å–∏—Å—Ç–µ–º–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

- **Docker**: [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker](https://docs.docker.com/get-docker/)
- **Docker Compose**: [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker Compose](https://docs.docker.com/compose/install/)

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å–ø–µ—à–Ω–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–æ–º–∞–Ω–¥–æ–π:

```bash
docker -v  # –î–æ–ª–∂–µ–Ω –≤—ã–≤–µ—Å—Ç–∏ –≤–µ—Ä—Å–∏—é Docker
docker-compose -v  # –î–æ–ª–∂–µ–Ω –≤—ã–≤–µ—Å—Ç–∏ –≤–µ—Ä—Å–∏—é Compose
```
### –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env —Ñ–∞–π–ª

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç, –∏ –¥–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Backend:
DEBUG=* ‚Äî –í–∫–ª—é—á–∞–µ—Ç –æ—Ç–ª–∞–¥–∫—É (–º–æ–∂–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ª–æ–≥–∏). \
DATABASE_DRIVER=postgres ‚Äî –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è PostgreSQL –∫–∞–∫ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö.\
DATABASE_URL=postgres ‚Äî URL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–º–æ–∂–µ—Ç –±—ã—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–µ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π).\
DB_PORT=5432 ‚Äî –ü–æ—Ä—Ç –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.\
DB_USERNAME=prac ‚Äî –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.\
DB_PASSWORD=strong_password ‚Äî –ü–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ë–î.\
DB_NAME=prac ‚Äî –ò–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.\
DB_HOST=postgres ‚Äî –ò–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ PostgreSQL (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤ Docker).\
NODE_ENV=production ‚Äî –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞ (–ø—Ä–æ–¥–∞–∫—à–Ω).\

–≠—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –±—ç–∫–µ–Ω–¥–æ–º –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PostgreSQL:
POSTGRES_USER=prac ‚Äî –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è PostgreSQL (—Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞).\
POSTGRES_PASSWORD=strong_password ‚Äî –ü–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è PostgreSQL.\
POSTGRES_DB=prac ‚Äî –ò–º—è —Å–æ–∑–¥–∞–≤–∞–µ–º–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.\

–≠—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä PostgreSQL –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∏ –µ–≥–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏.

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pgAdmin:
PGADMIN_DEFAULT_EMAIL=example@gmail.com ‚Äî –ü–æ—á—Ç–∞ –¥–ª—è –≤—Ö–æ–¥–∞ –≤ pgAdmin.\
PGADMIN_DEFAULT_PASSWORD=admin ‚Äî –ü–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞ –≤ pgAdmin.\
PGADMIN_CONFIG_MAX_LOGIN_ATTEMPTS=0 ‚Äî –û—Ç–∫–ª—é—á–∞–µ—Ç –ª–∏–º–∏—Ç –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞ (0 = –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ).\

–≠—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è PostgreSQL —á–µ—Ä–µ–∑ pgAdmin.

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Frontend (Vite):
VITE_API_URL=/api/afisha ‚Äî URL, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ API.\
VITE_CDN_URL=/content/afisha ‚Äî URL –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –≤–∏–¥–µ–æ –∏ —Ç. –¥.).\

–≠—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å API –∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.

### –†–∞–∑–º–µ—Å—Ç–∏—Ç–µ SQL-—Å–∫—Ä–∏–ø—Ç—ã
SQL-—Å–∫—Ä–∏–ø—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –≤ –ø–∞–ø–∫–µ backend/test/, –≤ –∫–æ—Ç–æ—Ä–æ–π –±—É–¥—É—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã:

```bash
backend/
 ‚îî‚îÄ‚îÄ test/
    ‚îú‚îÄ‚îÄ prac.init.sql     # –°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–Ω–∏—è –ë–î –∏ —Ç–∞–±–ª–∏—Ü
    ‚îú‚îÄ‚îÄ prac.films.sql    # –î–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã —Ñ–∏–ª—å–º–æ–≤
    ‚îú‚îÄ‚îÄ prac.schedules.sql  # –î–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π
```

### –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Nginx
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —Å–æ–∑–¥–∞–Ω–∞ —Å–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx –∏ SSL:

```bash
film-react-nest/
 ‚îî‚îÄ‚îÄ nginx/
    ‚îú‚îÄ‚îÄ nginx.conf         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ nginx (–æ–±—Ä–∞—Ç–Ω—ã–π –ø—Ä–æ–∫—Å–∏)
    ‚îî‚îÄ‚îÄ ssl/               # –ü–∞–ø–∫–∞, –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è SSL –∫–ª—é—á–∏
        ‚îú‚îÄ‚îÄ fullchain.pem  # SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
        ‚îî‚îÄ‚îÄ privkey.pem    # –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á
```

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
–î–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É:

```bash

docker-compose up -d --build

```
–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞:

–°–æ–±–µ—Ä–µ—Ç –∏ –∑–∞–ø—É—Å—Ç–∏—Ç –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã.\
–°–æ–∑–¥–∞—Å—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç –µ—ë –¥–∞–Ω–Ω—ã–º–∏.\
–†–∞–∑–¥–∞—Å—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —á–µ—Ä–µ–∑ Nginx.\

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL
–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

bash

docker exec -it postgres psql -U postgres -d my_database
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü:

``` bash

\dt
–ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü –Ω–µ—Ç, –∑–Ω–∞—á–∏—Ç SQL-—Å–∫—Ä–∏–ø—Ç—ã –Ω–µ –≤—ã–ø–æ–ª–Ω–∏–ª–∏—Å—å. –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ:
```
–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É:

```bash

docker exec -it postgres bash
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à–∏ SQL-—Å–∫—Ä–∏–ø—Ç—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –Ω—É–∂–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:
```
```bash

ls /docker-entrypoint-initdb.d/
```
–ó–∞–ø—É—Å—Ç–∏—Ç–µ SQL-—Å–∫—Ä–∏–ø—Ç—ã:

``` bash

psql -U prac -d prac -f /docker-entrypoint-initdb.d/1_init.sql
psql -U prac -d prac -f /docker-entrypoint-initdb.d/2_films.sql
psql -U prac -d prac -f /docker-entrypoint-initdb.d/3_schedules.sql
```
### –î–æ—Å—Ç—É–ø –∫ –ø—Ä–æ–µ–∫—Ç—É
–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:

–°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: https://my-choice.nomorepartiesco.ru\
–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ pgAdmin: http://<ip_—Å–µ—Ä–≤–µ—Ä–∞>:5050/\
–õ–æ–≥–∏–Ω: admin@example.com\
–ü–∞—Ä–æ–ª—å: admin\
–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL:\
–•–æ—Å—Ç: postgres\
–ë–∞–∑–∞: prac\
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: prac\
–ü–∞—Ä–æ–ª—å: strong_password\

### ‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞
–î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É:

``` bash

docker-compose down
–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:
```
```bash

docker logs -f postgres   # –õ–æ–≥–∏ PostgreSQL
docker logs -f backend    # –õ–æ–≥–∏ –±—ç–∫–µ–Ω–¥–∞
docker logs -f nginx      # –õ–æ–≥–∏ Nginx
```
üöÄ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —à–∞–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω–æ. –í —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.
## Backend Stack (film):

### NestJS:
@nestjs/core: ^10.0.0 \
@nestjs/common: ^10.0.0 \
@nestjs/mongoose: ^10.1.0\
@nestjs/typeorm: ^10.0.2\

### ORM/Database:
Mongoose: ^8.9.2\
TypeORM: ^0.3.20\

### Testing:
Jest: ^29.5.0\

### TypeScript:
TypeScript: ^5.3.3\

## Frontend Stack (film):

### React:
react: ^18.3.1\
react-dom: ^18.3.1\

### Vite:
vite: ^5.3.1\
@vitejs/plugin-react: ^4.3.1\

### Storybook:
@storybook/react: ^8.1.11\

### TypeScript:
typescript: ^5.2.2\
